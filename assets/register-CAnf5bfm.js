import{d as c,A as g,B as l}from"./app-CAk18JBs.js";import{a as m,l as d}from"./login-CLTox6iZ.js";async function u({name:s,email:a,password:r,bio:t,banner:n,avatar:o}){try{const e=await c(`${g}`,{method:"POST",body:{name:s,email:a,password:r,bio:t,banner:n,avatar:o}});return!0}catch(e){const i=JSON.parse(e.message.split(". ")[1]||"{}");throw console.error("Registration error details:",i),m(i),e}}async function f(s){s.preventDefault();const a=document.getElementById("register-name").value,r=document.getElementById("register-email").value,t=document.getElementById("register-password").value,n={name:a,email:r,password:t};try{if(await u(n)){alert("Successfully registered!");try{await d({email:r,password:t}),window.location.href=`${l}`}catch(e){alert("Login failed. Please try logging in manually."),console.error("Login error after registration:",e.message),window.location.href=`${l}/auth/login`}}}catch(o){console.error("Error in onRegister:",o.message)}}const y=document.forms.register;y.addEventListener("submit",f);
