import{d as l,A as c,B as d}from"./app-CfEDMwqF.js";import{g}from"./errorMessage-IHW2CCLv.js";import{l as m}from"./login-Bqnu_8zu.js";async function u({name:a,email:t,password:r,bio:o,banner:n,avatar:s}){try{const e=await l(`${c}`,{method:"POST",body:{name:a,email:t,password:r,bio:o,banner:n,avatar:s}});return!0}catch(e){const i=JSON.parse(e.message.split(". ")[1]||"{}");throw console.error("Registration error details:",i),g(i),e}}async function f(a){a.preventDefault();const t=document.getElementById("register-name"),r=document.getElementById("register-email"),o=document.getElementById("register-password"),n={name:t.value,email:r.value,password:o.value};try{if(await u(n)){alert("Successfully registered!");try{await m({email:r,password:o}),window.location.href=`${d}`}catch(e){alert("Login failed. Please try logging in manually."),console.error("Login error after registration:",e.message),window.location.href=`${d}/auth/login`}}}catch(s){t.classList.add("border","border-salmonRed","bg-red-50"),r.classList.add("border","border-salmonRed","bg-red-50"),o.classList.add("border","border-salmonRed","bg-red-50"),console.error("Error in onRegister:",s.message)}}const y=document.forms.register;y.addEventListener("submit",f);
