import{d as E,i as y,B as I}from"./app-BcuvxLM0.js";import{g as L}from"./errorMessage-IHW2CCLv.js";async function v({title:a,description:o,endsAt:r,tags:c,media:i}){const d={title:a,description:o,endsAt:r,tags:c,media:i},n=document.getElementById("create-end-date");try{await E(y,{method:"POST",body:d})&&(window.location.href=`${I}`)}catch(e){n.classList.add("border","border-salmonRed","bg-red-50");const t=JSON.parse(e.message.split(". ")[1]||"{}");L(t),console.error("There was a problem with the fetch operation:",e)}}async function B(a){a.preventDefault();const o=document.getElementById("create-title"),r=document.getElementById("create-description"),c=document.getElementById("create-end-date");function i(){const l=document.querySelectorAll("input[name='img-url']");return Array.from(l).map(g=>g.value)}function d(){const l=document.querySelectorAll("input[name='tag']");return Array.from(l).map(g=>g.value)}const n=o.value,e=r.value,t=new Date(c.value).toISOString(),s=i(),m=d(),u=s.map(l=>({url:l,alt:"Product image"}));v({title:n,description:e,endsAt:t,tags:m,media:u})}const h=document.forms.createListing,A=document.getElementById("create-img-btn"),b=document.getElementById("create-img-urls"),S=document.getElementById("create-tag-btn"),w=document.getElementById("create-tags");function p(a,o,r="img-url",c="url",i="Enter image URL"){a.addEventListener("click",d=>{d.preventDefault();const n=document.createElement("div");n.classList.add("flex","items-center");const e=document.createElement("label");e.classList.add("hidden"),e.htmlFor=r;const t=document.createElement("input");t.name=r,t.type=c,t.classList.add("w-full"),t.placeholder=i;const s=document.createElement("button");s.classList.add("flex","items-center","justify-center","text-salmonRed","cursor-pointer","w-10","h-10"),s.addEventListener("click",u=>{u.preventDefault(),n.remove()});const m=document.createElement("i");m.classList.add("fa-solid","fa-xmark"),s.append(m),n.append(e,t,s),o.append(n)})}p(A,b,"img-url","url","Enter image URL");p(S,w,"tag","text","Enter tag");h.addEventListener("submit",a=>{B(a)});
