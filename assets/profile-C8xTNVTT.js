import{d as y,k as b,b as w,j as L,m as x}from"./app-BEBFBh51.js";import{a as E}from"./getFromUrl-l7KgJi7t.js";async function U(a,{avatar:e,banner:t,bio:r}){const n={avatar:e,banner:t,bio:r};try{await y(`${b}/${a}`,{method:"PUT",body:n})&&(alert("Profile updated successfully!"),location.reload())}catch(o){console.error("There was a problem with the fetch operation:",o)}}function B(a,e){const t=document.querySelector("main");a.preventDefault();const r=document.createElement("div");r.classList.add("bg-skyBlue","bg-opacity-70","w-screen","h-screen","fixed","top-0","left-0");const n=document.createElement("div");n.classList.add("z-1","w-full","md:w-2/3","xl:w-1/2","h-full","p-10","absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","bg-white","rounded-xl","shadow-lg","flex","flex-col","items-end","gap-10");const o=document.createElement("div");o.classList.add("w-64","h-64","bg-gray-300","rounded-full","overflow-hidden");const l=document.createElement("img");l.classList.add("w-full","h-full","object-cover"),l.src=e.avatar.url,l.alt=e.avatar.alt;const d=document.createElement("div");d.classList.add("flex-[1]","h-full","flex","flex-col","justify-between");const c=document.createElement("div");c.classList.add("flex","justify-end","text-primaryBlue","hover:text-hoverBlue");const i=document.createElement("button"),m=document.createElement("i");m.classList.add("fa-solid","fa-xmark"),i.append(m),c.append(i),i.addEventListener("click",h=>{h.preventDefault,r.remove(),n.remove()});const u=document.createElement("div");u.classList.add("flex","flex-col","gap-3");const f=document.createElement("label");f.classList.add("text-xl","font-semibold"),f.htmlFor="avatar-url",f.innerHTML="Change avatar";const s=document.createElement("input");s.classList.add("w-full"),s.name="avatar-url",s.type="url",s.value=e.avatar.url,s.placeholder="Insert image URL",u.append(f,s);const v=document.createElement("div");v.classList.add("flex","justify-end");const p=document.createElement("button");p.classList.add("btn"),p.innerText="Update",p.addEventListener("click",h=>{I(h,e)}),v.append(p),d.append(u,v),o.append(l);const g=document.createElement("div");g.classList.add("w-full","h-full","flex","flex-col","items-center","xl:flex-row","gap-3"),g.append(o,d),n.append(c,g),t.append(r,n)}async function I(a,e){a.preventDefault();const n={url:document.querySelector("input[name='avatar-url']").value,alt:e.name+"'s Avatar"};U(e.name,{avatar:n})}async function S(){const a=document.querySelector("main"),e=w(),t=document.getElementById("profile-content");a.appendChild(e),await k(),t.classList.remove("hidden"),t.classList.add("flex"),e.remove(),a.classList.add("relative")}function P(a){const e=new URL(window.location.href);return e.searchParams.get("name")!==a.name&&(e.searchParams.set("name",a.name),window.history.replaceState({},"",e.toString())),e.toString()}async function k(){const a=L(),e=E();let t;e?t=await x(e):(P(a),t=await x(a.name));const r=document.getElementById("profile-greeting");r.innerText=t.name;const n=document.getElementById("profile-username");n.innerText=t.name;const o=document.getElementById("profile-credits");o.innerText=t.credits;const l=document.getElementById("profile-avatar");l.src=t.avatar.url,l.alt=t.avatar.alt;const d=document.getElementById("profile-banner");d.style.backgroundImage=`url('${t.banner.url}')`;const c=document.getElementById("profile-bio");c.innerText=t.bio,t.bio&&t.bio.length>0&&c.classList.add("bg-skyBlue");const i=new URL(window.location.href),m=document.getElementById("update-avatar");i.searchParams.get("name")===a.name&&m.classList.remove("hidden"),m.addEventListener("click",u=>{B(u,t)})}export{S as default,P as loggedInUserUrl};
