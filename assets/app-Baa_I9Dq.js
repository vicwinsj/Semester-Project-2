const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-2EVktsf9.js","assets/bid-CW1wU00v.js","assets/login-DhQ4_rWY.js","assets/login-CntTlUIr.js","assets/register-DhDYt-FG.js","assets/listing-DhoyPATK.js","assets/getFromUrl-l7KgJi7t.js","assets/profile-D7xEE5gV.js"])))=>i.map(i=>d[i]);
(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const S="modulepreload",k=function(t){return"/Semester-Project-2/"+t},y={},m=function(n,r,s){let e=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");e=Promise.allSettled(r.map(d=>{if(d=k(d),d in y)return;y[d]=!0;const c=d.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const i=document.createElement("link");if(i.rel=c?"stylesheet":S,c||(i.as="script"),i.crossOrigin="",i.href=d,l&&i.setAttribute("nonce",l),document.head.appendChild(i),c)return new Promise((E,h)=>{i.addEventListener("load",E),i.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return e.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return n().catch(o)})};async function D(t=window.location.pathname){const r=location.hostname.includes("github.io")?"/Semester-Project-2":"/";let s=t.startsWith(r)?t.slice(r.length).replace(/\/index\.html$/,"/"):t.replace(/\/index\.html$/,"/"),e;switch(s){case"/":e=await m(()=>import("./home-2EVktsf9.js"),__vite__mapDeps([0,1]));break;case"/auth/login/":e=await m(()=>import("./login-DhQ4_rWY.js"),__vite__mapDeps([2,3]));break;case"/auth/register/":e=await m(()=>import("./register-DhDYt-FG.js"),__vite__mapDeps([4,3]));break;case"/listing/":e=await m(()=>import("./listing-DhoyPATK.js"),__vite__mapDeps([5,1,6]));break;case"/listing/create/":e=await m(()=>import("./listingCreate-rb9L5uvI.js"),[]);break;case"/profile/":e=await m(()=>import("./profile-D7xEE5gV.js"),__vite__mapDeps([7,6]));break;default:e=await m(()=>import("./notFound-BNXFWLKC.js"),[])}e&&typeof e.default=="function"&&e.default()}const p="/Semester-Project-2",L="efffe6d5-fb4b-4a2c-a744-5dd884d1924e",I="https://v2.api.noroff.dev",P=`${I}/auth`,ee=`${P}/login`,te=`${P}/register`,A=`${I}/auction`,v=`${A}/listings`,B=`${A}/profiles`;async function ne(t){return t.data.accessToken&&localStorage.setItem("accessToken",t.data.accessToken),localStorage.getItem("accessToken")}const g=localStorage.getItem("accessToken");class f extends Error{}f.prototype.name="InvalidTokenError";function x(t){return decodeURIComponent(atob(t).replace(/(.)/g,(n,r)=>{let s=r.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function H(t){let n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return x(n)}catch{return atob(n)}}function M(t,n){if(typeof t!="string")throw new f("Invalid token specified: must be a string");n||(n={});const r=n.header===!0?0:1,s=t.split(".")[r];if(typeof s!="string")throw new f(`Invalid token specified: missing part #${r+1}`);let e;try{e=H(s)}catch(o){throw new f(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(e)}catch(o){throw new f(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}function O(){const t=localStorage.getItem("accessToken");return t?M(t):(console.warn("Access token is missing. User is not logged in."),null)}function C(t="GET",n=!0){const r=new Headers;return t!=="GET"&&r.append("Content-Type","application/json"),n&&L&&g&&(r.append("Authorization",`Bearer ${g}`),r.append("X-Noroff-API-Key",L)),r}async function $(t,{method:n="GET",body:r,...s}={}){const e={method:n,headers:C(n),...s};n!=="GET"&&r&&(e.body=JSON.stringify(r));try{const o=await fetch(t,e);if(o.status===204||o.headers.get("Content-Length")==="0")return null;if(!o.ok){const a=await o.text();throw new Error(`HTTP error! Status: ${o.status}. ${a}`)}return await o.json()}catch(o){throw console.error("Fetching error:",o.message),o}}async function U(t,{_listings:n,_wins:r}={}){const s=new URL(`${B}/${t}`);n&&s.searchParams.append("_listings","true"),r&&s.searchParams.append("_wins","true");try{return(await $(s)).data}catch(e){throw console.error("Error fetching user profile:",e),e}}const R=document.getElementById("menu-create"),G=document.getElementById("menu-register"),N=document.getElementById("menu-login"),j=document.getElementById("menu-logout"),b=document.getElementById("menu-profile"),q=document.getElementById("burger"),_=document.getElementById("menu");async function V(){if(q.addEventListener("click",t=>{t.preventDefault(),_.classList.toggle("hidden"),_.classList.toggle("flex")}),g){const t=O();R.classList.remove("hidden"),G.classList.add("hidden"),N.classList.add("hidden"),j.classList.remove("hidden");const n=await U(t.name);b.classList.remove("hidden"),b.href=`${p}/profile/?name=${n.name}`;const r=document.getElementById("menu-avatar");r.classList.remove("hidden"),r.src=n.avatar.url,r.alt=n.avatar.alt}}function F(t){t.preventDefault(),localStorage.accessToken&&(localStorage.removeItem("accessToken"),window.location.pathname===`${p}/profile/`?window.location.href=`${p}`:location.reload())}function K(){document.getElementById("menu-logout").addEventListener("click",n=>F(n))}function W(){const t=document.createElement("div");return t.classList.add("loader","absolute","inset-0","flex","justify-center","items-center"),t.innerHTML=`
    <div class="loader-ball animate-bounce1 w-4 h-4 bg-focusBlue rounded-full"></div>
    <div class="loader-ball animate-bounce2 w-6 h-6 bg-primaryBlue rounded-full"></div>
    <div class="loader-ball animate-bounce3 w-8 h-8 bg-hoverBlue rounded-full"></div>
  `,t}function Y(t){return new Date(t)<=new Date}async function J({sort:t="created",sortOrder:n="desc",limit:r=100,page:s=1,_seller:e,_bids:o=!0,_tag:a,_active:l=!0,search:d=""}={}){let c;d?(c=new URL(`${v}/search`),c.searchParams.append("q",d)):(c=new URL(`${v}`),c.searchParams.append("sort",t),c.searchParams.append("sortOrder",n),c.searchParams.append("limit",r),c.searchParams.append("page",s),a&&c.searchParams.append("_tag",a),e&&c.searchParams.append("_seller",e),o&&c.searchParams.append("_bids","true"),l&&c.searchParams.append("_active","true"));try{return(await $(c)).data.filter(h=>!Y(h.endsAt))}catch(u){throw console.error("Fetching error:",u.message),u}}function z(t){const s=new Date(t)-new Date;if(s<=0)return"Expired";const e=Math.floor(s/(1e3*60*60*24)),o=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),a=Math.floor(s%(1e3*60*60)/(1e3*60));return`Ends in ${e} d ${o} h ${a} min`}function X(t){let n={amount:0,bidder:{name:"No bids yet"}};return t.bids&&t.bids.length>0&&t.bids.forEach(r=>{r.amount>n.amount&&(n=r)}),n}function Q(t){const n=`${p}/listing/index.html?id=${t.id}`;return window.location.href=n,n}function T(t,n){n.classList.add("regular-padding","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-3"),t.forEach(r=>{const s=document.createElement("div");s.classList.add("flex","flex-col","gap-3","w-full","cursor-pointer"),s.onclick=function(){Q(r)};const e=document.createElement("div");e.classList.add("overflow-hidden","w-full","h-80");const o=document.createElement("img");if(o.classList.add("w-full","h-full","object-cover"),Array.isArray(r.media)&&r.media.length>0){const i=r.media[0];o.src=i.url||"https://images.unsplash.com/photo-1602052793312-b99c2a9ee797?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",o.alt=i.alt||i.url||"Example image"}else o.src="https://images.unsplash.com/photo-1602052793312-b99c2a9ee797?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",o.alt="Example image";const a=document.createElement("div"),l=document.createElement("h3");l.innerHTML=r.title;const d=document.createElement("p");d.innerHTML="Current bid: ";const c=document.createElement("span");c.innerHTML=X(r).amount,c.classList.add("font-semibold"),d.appendChild(c);const u=document.createElement("p");u.innerHTML=z(r.endsAt),a.append(l,d),e.appendChild(o),s.append(e,a,u),n.appendChild(s)})}async function Z(){const t=document.querySelector("form[name='search']"),n=document.querySelector("input[name='search']"),r=document.querySelector("main");t.addEventListener("submit",async s=>{s.preventDefault();const e=n.value.trim();if(!e)return;const o=`${p}/?q=${encodeURIComponent(e)}`;window.history.replaceState({},document.title,o),r.innerHTML="";const a=document.createElement("div");r.append(a);const l=document.createElement("h1");l.innerHTML="Search results for: ",l.classList.add("regular-padding");const d=document.createElement("span");d.classList.add("font-tinos","italic","text-primaryBlue"),d.innerHTML=`${e}`,l.appendChild(d);const c=document.createElement("p");r.append(c);const u=W();a.append(u);try{const i=await J({search:e,limit:12});if(u.remove(),r.prepend(l),i.length===0){c.innerHTML=`Sorry, no results found for "${e}". Try another search.`;return}else i.length===1?(c.innerHTML=i.length+` result for "${e}".`,T(i,a)):i.length>1&&(c.innerHTML=i.length+` results for "${e}".`,T(i,a))}catch(i){console.error("Error fetching search results:",i),a.innerHTML="<p>Error fetching results. Please try again later.</p>"}})}document.addEventListener("DOMContentLoaded",async()=>{await D(window.location.pathname),await V(),K(),await Z()});const w=document.createElement("script");w.src="https://kit.fontawesome.com/7d99a0a315.js";w.crossOrigin="anonymous";document.head.appendChild(w);export{te as A,p as G,g as a,W as b,z as c,$ as d,ee as e,X as f,J as g,ne as h,v as i,O as j,B as k,Q as l,U as m};
