const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-DmgVwm_Z.js","assets/bid-BoEt4qw2.js","assets/login-DX0GTlBY.js","assets/error-CnYwh7_F.js","assets/register-CuP-p8S1.js","assets/listing-BZoT5z_S.js","assets/getFromUrl-9EXRBEck.js","assets/profile-DlgrvryY.js"])))=>i.map(i=>d[i]);
(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();const D="modulepreload",S=function(e){return"/"+e},E={},m=function(n,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),i=c?.nonce||c?.getAttribute("nonce");r=Promise.allSettled(t.map(l=>{if(l=S(l),l in E)return;E[l]=!0;const a=l.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":D,a||(d.as="script"),d.crossOrigin="",d.href=l,i&&d.setAttribute("nonce",i),document.head.appendChild(d),a)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return r.then(c=>{for(const i of c||[])i.status==="rejected"&&o(i.reason);return n().catch(o)})},k="/semester-project-2";async function $(e=window.location.pathname){let n=e.replace(k,"").replace(/\/index\.html$/,"/"),t;switch(n){case"/":t=await m(()=>import("./home-DmgVwm_Z.js"),__vite__mapDeps([0,1]));break;case"/auth/login/":t=await m(()=>import("./login-DX0GTlBY.js"),__vite__mapDeps([2,3]));break;case"/auth/register/":t=await m(()=>import("./register-CuP-p8S1.js"),__vite__mapDeps([4,3]));break;case"/listing/":t=await m(()=>import("./listing-BZoT5z_S.js"),__vite__mapDeps([5,1,6]));break;case"/listing/edit/":t=await m(()=>Promise.resolve().then(()=>ee),void 0);break;case"/listing/create/":t=await m(()=>import("./listingCreate-CQEpmNEm.js"),[]);break;case"/profile/":t=await m(()=>import("./profile-DlgrvryY.js"),__vite__mapDeps([7,6]));break;default:t=await m(()=>import("./notFound-BNXFWLKC.js"),[])}t&&typeof t.default=="function"&&t.default()}async function te(e){return e.data.accessToken&&localStorage.setItem("accessToken",e.data.accessToken),localStorage.getItem("accessToken")}const g=localStorage.getItem("accessToken");class p extends Error{}p.prototype.name="InvalidTokenError";function x(e){return decodeURIComponent(atob(e).replace(/(.)/g,(n,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function B(e){let n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return x(n)}catch{return atob(n)}}function M(e,n){if(typeof e!="string")throw new p("Invalid token specified: must be a string");n||(n={});const t=n.header===!0?0:1,s=e.split(".")[t];if(typeof s!="string")throw new p(`Invalid token specified: missing part #${t+1}`);let r;try{r=B(s)}catch(o){throw new p(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new p(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}function O(){const e=localStorage.getItem("accessToken");return e?M(e):(console.warn("Access token is missing. User is not logged in."),null)}const y="efffe6d5-fb4b-4a2c-a744-5dd884d1924e",T="https://v2.api.noroff.dev",I=`${T}/auth`,ne=`${I}/login`,re=`${I}/register`,P=`${T}/auction`,L=`${P}/listings`,U=`${P}/profiles`;function H(e="GET",n=!0){const t=new Headers;return e!=="GET"&&t.append("Content-Type","application/json"),n&&y&&g&&(t.append("Authorization",`Bearer ${g}`),t.append("X-Noroff-API-Key",y)),t}async function A(e,{method:n="GET",body:t,...s}={}){const r={method:n,headers:H(n),...s};n!=="GET"&&t&&(r.body=JSON.stringify(t));try{const o=await fetch(e,r);if(o.status===204||o.headers.get("Content-Length")==="0")return null;if(!o.ok){const c=await o.text();throw new Error(`HTTP error! Status: ${o.status}. ${c}`)}return await o.json()}catch(o){throw console.error("Fetching error:",o.message),o}}async function C(e,{_listings:n,_wins:t}={}){const s=new URL(`${U}/${e}`);n&&s.searchParams.append("_listings","true"),t&&s.searchParams.append("_wins","true");try{return(await A(s)).data}catch(r){throw console.error("Error fetching user profile:",r),r}}const R=document.getElementById("menu-create"),j=document.getElementById("menu-register"),N=document.getElementById("menu-login"),q=document.getElementById("menu-logout"),v=document.getElementById("menu-profile"),G=document.getElementById("burger"),b=document.getElementById("menu");async function V(){if(G.addEventListener("click",e=>{e.preventDefault(),b.classList.toggle("hidden"),b.classList.toggle("flex")}),g){const e=O();R.classList.remove("hidden"),j.classList.add("hidden"),N.classList.add("hidden"),q.classList.remove("hidden");const n=await C(e.name);v.classList.remove("hidden"),v.href=`/profile/?name=${n.name}`;const t=document.getElementById("menu-avatar");t.classList.remove("hidden"),t.src=n.avatar.url,t.alt=n.avatar.alt}}function F(e){e.preventDefault(),localStorage.accessToken&&(localStorage.removeItem("accessToken"),location.reload())}function K(){document.getElementById("menu-logout").addEventListener("click",n=>F(n))}function W(){const e=document.createElement("div");return e.classList.add("loader","absolute","inset-0","flex","justify-center","items-center"),e.innerHTML=`
    <div class="loader-ball animate-bounce1 w-4 h-4 bg-focusBlue rounded-full"></div>
    <div class="loader-ball animate-bounce2 w-6 h-6 bg-primaryBlue rounded-full"></div>
    <div class="loader-ball animate-bounce3 w-8 h-8 bg-hoverBlue rounded-full"></div>
  `,e}function oe(e){e&&(e.classList.remove("hidden"),e.classList.add("flex"))}function se(e){e&&(e.classList.add("hidden"),e.classList.remove("flex"))}function Y(e){return new Date(e)<=new Date}async function z({sort:e="created",sortOrder:n="desc",limit:t=100,page:s=1,_seller:r,_bids:o=!0,_tag:c,_active:i=!0,search:l=""}={}){let a;l?(a=new URL(`${L}/search`),a.searchParams.append("q",l)):(a=new URL(`${L}`),a.searchParams.append("sort",e),a.searchParams.append("sortOrder",n),a.searchParams.append("limit",t),a.searchParams.append("page",s),c&&a.searchParams.append("_tag",c),r&&a.searchParams.append("_seller",r),o&&a.searchParams.append("_bids","true"),i&&a.searchParams.append("_active","true"));try{return(await A(a)).data.filter(h=>!Y(h.endsAt))}catch(u){throw console.error("Fetching error:",u.message),u}}function J(e){const s=new Date(e)-new Date;if(s<=0)return"Expired";const r=Math.floor(s/(1e3*60*60*24)),o=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),c=Math.floor(s%(1e3*60*60)/(1e3*60));return`Ends in ${r} d ${o} h ${c} min`}function X(e){let n={amount:0,bidder:{name:"No bids yet"}};return e.bids&&e.bids.length>0&&e.bids.forEach(t=>{t.amount>n.amount&&(n=t)}),n}function Q(e){const n=`/listing/index.html?id=${e.id}`;return window.location.href=n,n}function _(e,n){n.classList.add("regular-padding","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-3"),e.forEach(t=>{const s=document.createElement("div");s.classList.add("flex","flex-col","gap-3","w-full","cursor-pointer"),s.onclick=function(){Q(t)};const r=document.createElement("div");r.classList.add("overflow-hidden","w-full","h-80");const o=document.createElement("img");if(o.classList.add("w-full","h-full","object-cover"),Array.isArray(t.media)&&t.media.length>0){const d=t.media[0];o.src=d.url||"https://images.unsplash.com/photo-1602052793312-b99c2a9ee797?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",o.alt=d.alt||d.url||"Example image"}else o.src="https://images.unsplash.com/photo-1602052793312-b99c2a9ee797?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",o.alt="Example image";const c=document.createElement("div"),i=document.createElement("p");i.innerHTML=t.title;const l=document.createElement("p");l.innerHTML="Current bid: ";const a=document.createElement("span");a.innerHTML=X(t).amount,a.classList.add("font-semibold"),l.appendChild(a);const u=document.createElement("p");u.innerHTML=J(t.endsAt),c.append(i,l),r.appendChild(o),s.append(r,c,u),n.appendChild(s)})}async function Z(){const e=document.querySelector("form[name='search']"),n=document.querySelector("input[name='search']"),t=document.querySelector("main");e.addEventListener("submit",async s=>{s.preventDefault();const r=n.value.trim();if(!r)return;const c=`${window.location.origin}/?q=${encodeURIComponent(r)}`;window.history.replaceState({},document.title,c),t.innerHTML="";const i=document.createElement("div");t.append(i);const l=document.createElement("h1");l.innerHTML="Search results for: ",l.classList.add("regular-padding");const a=document.createElement("span");a.classList.add("font-tinos","italic","text-primaryBlue"),a.innerHTML=`${r}`,l.appendChild(a);const u=document.createElement("p");t.append(u);const d=W();i.append(d);try{const f=await z({search:r,limit:12});if(d.remove(),t.prepend(l),f.length===0){u.innerHTML=`Sorry, no results found for "${r}". Try another search.`;return}else f.length===1?(u.innerHTML=f.length+` result for "${r}".`,_(f,i)):f.length>1&&(u.innerHTML=f.length+` results for "${r}".`,_(f,i))}catch(f){console.error("Error fetching search results:",f),i.innerHTML="<p>Error fetching results. Please try again later.</p>"}})}await $(window.location.pathname);const w=document.createElement("script");w.src="https://kit.fontawesome.com/7d99a0a315.js";w.crossOrigin="anonymous";document.head.appendChild(w);V();K();await Z();document.addEventListener("DOMContentLoaded",()=>{const e="/semester-project-2";document.querySelectorAll("a[href^='/']").forEach(n=>{n.href=e+n.getAttribute("href")}),document.querySelectorAll("img[src^='/']").forEach(n=>{n.src=e+n.getAttribute("src")})});const ee=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{L as A,ne as a,re as b,U as c,A as d,W as e,O as f,te as g,se as h,C as i,X as j,J as k,Q as l,z as m,g as n,oe as s};
